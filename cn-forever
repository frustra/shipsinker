#!/bin/bash

PID=$(cat ../package.pid 2> /dev/null)
if [ $? -eq 0 ]; then
  ps -p $PID > /dev/null 2>&1
  if [ $? -eq 0 ]; then
    echo "Process already running."
    exit
  fi
fi

echo $$ > ../package.pid

COMMAND=$1
shift
while true; do
  $COMMAND "$@"
  echo "Process exited with code: $?"
  sleep 5
done
